{% extends 'base.html' %}
{% load static %}


{% block body %}
    <main>
        <div class="container">
            <h2 class=" mx-4 ">Hesap Ayarları</h2>
            <hr>
           <div class="row my-5" >
            <div class="col-8">
                <form>
                    <ul  class="my-5" style="list-style-type: none;">
                        <li  class="my-3 fw-bold text-black "><a href="#" >E-Posta: {{ request.user.email }}</a></li>
    
                        <!-- Modal E-posta Change -->
                        <div class="modal fade" id="emailModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">E-posta Değiştir</h5>
                                <button type="button" class="btn-close" data-mdb-ripple-init data-mdb-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <form method="POST">
                                    {% csrf_token %}
                                    <div class="modal-body d-flex flex-column gap-3">
                                        <input type="email" name="email" value="{{ request.user.email }}" class="form-control">
                                        <input type="password" name="password" placeholder="Lütfen Parolanızı Giriniz" class="form-control">
                                    </div>
                                    <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-mdb-ripple-init data-mdb-dismiss="modal">iptal</button>
                                    <button type="submit" name="submit" value="emailSubmit" class="btn btn-success" data-mdb-ripple-init>Kaydet</button>
                                    </div>
                                </form>
                            </div>
                            </div>
                        </div>
                        <hr>
                        <li class="my-3 fw-bold"><a href="#">
                        {% if  request.user.usermy.tel %}
                            Tel: {{ request.user.usermy.tel|slice:":4" }}***{{ request.user.usermy.tel|slice:"-2:" }}</a></li>
                        {% else %}
                            <p>"---"</p>    
                        {% endif %}
                        <!-- Modal Telefon Change -->
                        <div class="modal fade" id="telModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Telefon Numarası Değiştir</h5>
                            <button type="button" class="btn-close" data-mdb-ripple-init data-mdb-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <form method="POST">
                                {% csrf_token %}
                                <div class="modal-body d-flex flex-column gap-3">
                                    <input type="text" name="tel" value="{{ request.user.usermy.tel }}" class="form-control">
                                    <input type="password" name="password" placeholder="Lütfen Parolanızı Giriniz" class="form-control">
                                </div>
                                <div class="modal-footer">
                                <button type="button" class="btn btn-danger" data-mdb-ripple-init data-mdb-dismiss="modal">iptal</button>
                                <button type="submit" name="submit" value="telSubmit" class="btn btn-success" data-mdb-ripple-init>Kaydet</button>
                                </div>
                            </form>
                        </div>
                        </div>
                        </div>
                        <hr>
                        <li class="my-3 fw-bold"><a href="#">Parola: *********</a></li>
                        <!-- Modal Parola Change -->
                        <div class="modal fade" id="passwordModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Parola Değiştir</h5>
                                <button type="button" class="btn-close" data-mdb-ripple-init data-mdb-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <form method="POST">
                                    {% csrf_token %}
                                    <div class="modal-body d-flex flex-column gap-3">
                                        <input type="password" name="password" placeholder="Lütfen Eski Parolanızı Giriniz" class="form-control">
                                        <input type="password" name="password1" placeholder="Lütfen Yeni Parolanızı Giriniz" class="form-control">
                                        <input type="password" name="password2" placeholder="Lütfen Yeni Parolanızı Tekrar Giriniz" class="form-control">
                                    </div>
                                    <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-mdb-ripple-init data-mdb-dismiss="modal">iptal</button>
                                    <button type="submit" name="submit" value="passwordSubmit" class="btn btn-success" data-mdb-ripple-init>Kaydet</button>
                                    </div>
                                </form>
                            </div>
                            </div>
                        </div>
                        <hr>
                        <li class="my-3 fw-bold"><a href="#">Kullanıcı Adı: {{ request.user }}</a></li>
                        <!-- Modal Kullanıcı Change -->
                        <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Kullanıcı Adı Değiştir</h5>
                            <button type="button" class="btn-close" data-mdb-ripple-init data-mdb-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <form method="POST">
                                {% csrf_token %}
                                <div class="modal-body d-flex flex-column gap-3">
                                    <input type="text" name="username" {{ request.user }} class="form-control">
                                    <input type="password" name="password" placeholder="Lütfen Parolanızı Giriniz" class="form-control">
                                </div>
                                <div class="modal-footer">
                                <button type="button" class="btn btn-danger" data-mdb-ripple-init data-mdb-dismiss="modal">iptal</button>
                                <button type="submit" name="submit" value="userSubmit" class="btn btn-success" data-mdb-ripple-init>Kaydet</button>
                                </div>
                            </form>
                        </div>
                        </div>
                        </div>
                        <div>
                            <div>
                                <a class="my-3 fw-bold" href="#">Profil Resmi:</a>
                            </div>
                                <img style="width: 100px; height: 100px;"  src="{{ request.user.usermy.profile_image.url }}" alt=""> 
                        </div>
                        <!-- Modal Profil Resmi Change --> 
                        <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Profil Resmini Değiştir</h5>
                            <button type="button" class="btn-close" data-mdb-ripple-init data-mdb-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <form method="POST" >
                                {% csrf_token %}
                                <div class="modal-body d-flex flex-column gap-3">
                                    <input type="file" name="profile_image" id="">
                                    <input type="password" name="password" class="form-control" placeholder="Lütfen Parolanızı Giriniz ">
                                </div>
                                <div class="modal-footer">
                                <button type="button" class="btn btn-danger" data-mdb-ripple-init data-mdb-dismiss="modal">iptal</button>
                                <button type="submit" name="submit" value="imageSubmit" class="btn btn-success" data-mdb-ripple-init>Kaydet</button>
                                </div>
                            </form>
                        </div>
                        </div>
                        </div>                   
                        <hr>
                    </ul>
                </form>
            </div>
            <div class="col-4">
                <form >
                    <ul class="my-5" style="list-style-type: none;">
                        <li class="my-4"><a data-mdb-ripple-init data-mdb-modal-init data-mdb-target="#emailModal" class="btn btn-primary">E-Posta Degiştir</a></li>
                        <li class="my-4"><a data-mdb-ripple-init data-mdb-modal-init data-mdb-target="#telModal" class="btn btn-primary">Telefon Degiştir</a></li>
                        <li class="my-4"><a data-mdb-ripple-init data-mdb-modal-init data-mdb-target="#passwordModal" class="btn btn-primary">Parola Degiştir</a></li>
                        <li class="my-4"><a data-mdb-ripple-init data-mdb-modal-init data-mdb-target="#userModal" class="btn btn-primary">Kullanıcı Degiştir</a></li>
                        <li class="my-4"> <a data-mdb-ripple-init data-mdb-modal-init data-mdb-target="#imageModal" class="btn btn-primary">Profil Foto Degiştir</a></li>
                    </ul>
                </form>
            </div>

           </div>
        </div>
    </main>

    <style>
        a{
            color: black;
        }
    </style>
{% endblock body %}
    